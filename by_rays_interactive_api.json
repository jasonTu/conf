{
    "swagger": "2.0",
    "info": {
        "description": "这是版易和Rays系统集成交互API文档",
        "version": "1.0.0",
        "title": "版易、Rays平台集成API",
        "contact": {
            "email": "jason_tu@puyacn.com"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        }
    },
    "schemes": [
        "https"
    ],
    "security": [
        {
            "AWS4_HMAC_SHA256": []
        }
    ],
    "paths": {
        "/books/{book_id}/": {
            "get": {
                "summary": "获取单本书籍信息书籍信息",
                "operationId": "getBookByID",
                "description": "根据书籍唯一标识返回书籍详细信息",
                "produces": [
                    "application/json"
                ],
                "security": [
                    {
                        "AWS4_HMAC_SHA256": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "书籍信息",
                        "schema": {
                            "$ref": "#/definitions/Book"
                        }
                    },
                    "401": {
                        "description": "鉴权问题",
                        "schema": {
                            "$ref": "#/definitions/ErrorModel"
                        }
                    },
                    "403": {
                        "description": "操作被禁止",
                        "schema": {
                            "$ref": "#/definitions/ErrorModel"
                        }
                    },
                    "404": {
                        "description": "所对应书籍不存在",
                        "schema": {
                            "$ref": "#/definitions/ErrorModel"
                        }
                    }
                }
            },
            "parameters": [
                {
                    "in": "path",
                    "name": "book_id",
                    "description": "书籍唯一标识",
                    "required": true,
                    "type": "string"
                }
            ]
        },
        "/scanevents/{book_id}/": {
            "get": {
                "summary": "获取书籍二维码扫码信息",
                "operationId": "getQrScannedInfoByBid",
                "description": "根据书籍唯一标识和时间段参数返回书籍二维码扫码信息",
                "security": [
                    {
                        "AWS4_HMAC_SHA256": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "基于某个时间段的二维码扫码数据： 1.返回的结果均处在开始和截止时间内；2.边界数据完整，不得漏传数据",
                        "schema": {
                            "$ref": "#/definitions/QrScanEvents"
                        }
                    },
                    "401": {
                        "description": "鉴权问题",
                        "schema": {
                            "$ref": "#/definitions/ErrorModel"
                        }
                    },
                    "403": {
                        "description": "操作被禁止",
                        "schema": {
                            "$ref": "#/definitions/ErrorModel"
                        }
                    },
                    "404": {
                        "description": "所对应书籍不存在",
                        "schema": {
                            "$ref": "#/definitions/ErrorModel"
                        }
                    }
                }
            },
            "parameters": [
                {
                    "in": "path",
                    "name": "book_id",
                    "description": "书籍唯一标识",
                    "required": true,
                    "type": "string"
                },
                {
                    "in": "query",
                    "name": "start_time",
                    "description": "开始时间（时间戳）",
                    "required": true,
                    "type": "integer"
                },
                {
                    "in": "query",
                    "name": "end_time",
                    "description": "截止时间（时间戳）",
                    "required": true,
                    "type": "integer"
                }
            ]
        },
        "/readers/{user_id}/": {
            "get": {
                "summary": "获取读者详细信息",
                "operationId": "getReaderByBid",
                "description": "根据用户唯一标识获取读者详细信息",
                "security": [
                    {
                        "AWS4_HMAC_SHA256": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "读者详细信息",
                        "schema": {
                            "$ref": "#/definitions/Readers"
                        }
                    },
                    "401": {
                        "description": "鉴权问题",
                        "schema": {
                            "$ref": "#/definitions/ErrorModel"
                        }
                    },
                    "403": {
                        "description": "操作被禁止",
                        "schema": {
                            "$ref": "#/definitions/ErrorModel"
                        }
                    },
                    "404": {
                        "description": "所对应书籍不存在",
                        "schema": {
                            "$ref": "#/definitions/ErrorModel"
                        }
                    }
                }
            },
            "parameters": [
                {
                    "in": "path",
                    "name": "user_id",
                    "description": "用户唯一标识",
                    "required": true,
                    "type": "string"
                }
            ]
        },
        "/transactions/{book_id}/": {
            "get": {
                "summary": "获取书籍相关交易数据",
                "operationId": "getTransactionsByBid",
                "description": "根据书籍唯一标识获取书籍基于某个时间段的交易数据",
                "security": [
                    {
                        "AWS4_HMAC_SHA256": []
                    }
                ],
                "responses": {
                    "200": {
                        "description": "基于某个时间的交易数据： 1.返回的结果均处在开始和截止时间内；2.边界数据完整，不得漏传数据",
                        "schema": {
                            "$ref": "#/definitions/Transactions"
                        }
                    },
                    "401": {
                        "description": "鉴权问题",
                        "schema": {
                            "$ref": "#/definitions/ErrorModel"
                        }
                    },
                    "403": {
                        "description": "操作被禁止",
                        "schema": {
                            "$ref": "#/definitions/ErrorModel"
                        }
                    },
                    "404": {
                        "description": "所对应书籍不存在",
                        "schema": {
                            "$ref": "#/definitions/ErrorModel"
                        }
                    }
                }
            },
            "parameters": [
                {
                    "in": "path",
                    "name": "book_id",
                    "description": "书籍唯一标识",
                    "required": true,
                    "type": "integer"
                },
                {
                    "in": "query",
                    "name": "start_time",
                    "description": "开始时间（时间戳）",
                    "required": false,
                    "type": "string"
                },
                {
                    "in": "query",
                    "name": "end_time",
                    "description": "截止时间（时间戳）",
                    "required": false,
                    "type": "integer"
                }
            ]
        }
    },
    "securityDefinitions": {
        "AWS4_HMAC_SHA256": {
            "type": "apiKey",
            "in": "header",
            "name": "api_key",
            "description": "参考:http://docs.aws.amazon.com/general/latest/gr/signature-version-4.html"
        }
    },
    "definitions": {
        "Book": {
            "properties": {
                "id": {
                    "type": "string",
                    "description": "书籍ID"
                },
                "name": {
                    "type": "string",
                    "description": "书籍名称"
                },
                "thumb": {
                    "type": "string",
                    "format": "url",
                    "description": "书籍缩略图"
                },
                "publisher": {
                    "type": "string",
                    "description": "出版社"
                },
                "categories": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Category"
                    },
                    "description": "书籍所属分类"
                },
                "isbn": {
                    "type": "string",
                    "description": "书籍ISBN号"
                },
                "author": {
                    "type": "string",
                    "description": "作者"
                },
                "price": {
                    "type": "number",
                    "format": "double",
                    "description": "书籍售价"
                },
                "publish_time": {
                    "type": "string",
                    "description": "出版时间"
                },
                "publish_count": {
                    "type": "integer",
                    "description": "出版册数"
                },
                "print_times": {
                    "type": "integer",
                    "description": "第几次印刷"
                },
                "character_count": {
                    "type": "integer",
                    "description": "书籍字数"
                },
                "qrcodes": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/QrCode"
                    },
                    "description": "二维码信息"
                }
            }
        },
        "Category": {
            "properties": {
                "id": {
                    "type": "string",
                    "description": "类别ID"
                },
                "name": {
                    "type": "string",
                    "description": "类别名称"
                }
            }
        },
        "QrCode": {
            "properties": {
                "id": {
                    "type": "string",
                    "description": "二维码ID"
                },
                "url": {
                    "type": "string",
                    "format": "url",
                    "description": "二维码URL"
                },
                "title": {
                    "type": "string",
                    "description": "二维码名称"
                },
                "desc": {
                    "type": "string",
                    "description": "二维码描述"
                },
                "created_time": {
                    "type": "integer",
                    "format": "double",
                    "description": "二维码创建时间（时间戳）"
                },
                "tags": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/QrTag"
                    },
                    "description": "二维码标签"
                },
                "resources": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/QrResource"
                    },
                    "description": "二维码对应资源"
                }
            }
        },
        "QrTag": {
            "properties": {
                "id": {
                    "type": "string",
                    "description": "标签ID"
                },
                "name": {
                    "type": "string",
                    "description": "标签名称"
                }
            }
        },
        "QrResource": {
            "properties": {
                "id": {
                    "type": "string",
                    "description": "资源ID"
                },
                "url": {
                    "type": "string",
                    "format": "url",
                    "description": "资源URL"
                },
                "type": {
                    "type": "string",
                    "description": "资源类型"
                },
                "title": {
                    "type": "string",
                    "description": "资源标题"
                },
                "thumb": {
                    "type": "string",
                    "format": "url",
                    "description": "资源缩略图"
                },
                "desc": {
                    "type": "string",
                    "description": "资源描述"
                }
            }
        },
        "QrScanEvents": {
            "properties": {
                "start_time": {
                    "type": "integer",
                    "format": "double",
                    "description": "起始时间（时间戳）"
                },
                "end_time": {
                    "type": "integer",
                    "format": "double",
                    "description": "截止时间（时间戳）"
                },
                "results": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/QrScanEvent"
                    },
                    "description": "二维码扫描事件集"
                }
            }
        },
        "QrScanEvent": {
            "properties": {
                "user_id": {
                    "type": "string",
                    "description": "用户唯一标识"
                },
                "time": {
                    "type": "integer",
                    "format": "double",
                    "description": "扫描时间（时间戳）"
                },
                "qr_id": {
                    "type": "string",
                    "description": "二维码ID"
                },
                "location": {
                    "$ref": "#/definitions/Location"
                }
            }
        },
        "Location": {
            "properties": {
                "longitude": {
                    "type": "integer",
                    "format": "double",
                    "description": "经度"
                },
                "latitude": {
                    "type": "integer",
                    "format": "double",
                    "description": "纬度"
                }
            }
        },
        "Readers": {
            "properties": {
                "start_time": {
                    "type": "integer",
                    "format": "double",
                    "description": "起始时间（时间戳）"
                },
                "end_time": {
                    "type": "integer",
                    "format": "double",
                    "description": "截止时间（时间戳）"
                },
                "results": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Reader"
                    },
                    "description": "读者信息集"
                }
            }
        },
        "Reader": {
            "properties": {
                "user_id": {
                    "type": "string",
                    "description": "用户唯一标识"
                },
                "username": {
                    "type": "string",
                    "description": "用户名"
                },
                "nickname": {
                    "type": "string",
                    "description": "用户昵称"
                },
                "avater": {
                    "type": "string",
                    "format": "url",
                    "description": "用户头像URL"
                },
                "gender": {
                    "type": "string",
                    "description": "用户性别"
                },
                "province": {
                    "type": "string",
                    "description": "用户所在省份"
                }
            }
        },
        "Transactions": {
            "properties": {
                "start_time": {
                    "type": "integer",
                    "format": "double",
                    "description": "起始时间（时间戳）"
                },
                "end_time": {
                    "type": "integer",
                    "format": "double",
                    "description": "截止时间（时间戳）"
                },
                "results": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Transaction"
                    },
                    "description": "交易信息集"
                }
            }
        },
        "Transaction": {
            "properties": {
                "id": {
                    "type": "string",
                    "description": "交易ID"
                },
                "user_id": {
                    "type": "string",
                    "description": "用户唯一标识"
                },
                "time": {
                    "type": "integer",
                    "format": "double",
                    "description": "交易时间（时间戳）"
                },
                "qr_id": {
                    "type": "string",
                    "description": "二维码ID"
                },
                "resource_id": {
                    "type": "string",
                    "description": "交易相关资源"
                },
                "amount": {
                    "type": "integer",
                    "format": "double",
                    "description": "交易金额"
                }
            }
        },
        "ErrorModel": {
            "properties": {
                "code": {
                    "type": "integer",
                    "description": "错误码"
                },
                "msg": {
                    "type": "string",
                    "description": "错误描述"
                }
            }
        }
    },
    "host": "virtserver.swaggerhub.com",
    "basePath": "/jason_tu/DTrade/1.0.0"
}